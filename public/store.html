<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Classic Rust - Store</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Test Panel Styling */
        .test-panel {
            background-color: #2a2a2a;
            border: 2px dashed var(--primary-orange);
            padding: 20px;
            margin: 20px auto;
            max-width: 900px;
            text-align: center;
            border-radius: 10px;
        }
        .test-panel h3 { margin-top: 0; color: var(--primary-orange); }
        .test-btn {
            padding: 8px 15px;
            margin: 5px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            font-weight: bold;
            color: white;
            font-size: 12px;
            text-transform: uppercase;
        }
        .btn-gem { background-color: #0088cc; } 
        .btn-rank { background-color: #8e44ad; } 

        /* Adjust Grid for 5 items if needed, or let them wrap */
        .store-grid {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin-bottom: 50px;
        }
    </style>
</head>
<body>

    <header>
        <a href="index.html" class="logo"><img src="assets/logo.png" alt="Classic Rust Logo"></a>
         <div class="menu-toggle">
        <span></span>
        <span></span>
        <span></span>
    </div>
        <nav>
            <ul>
                <li><a href="servers.html">Servers</a></li>
                <li><a href="store.html" class="active">Store</a></li>
                <li><a href="create-ticket.html">Create a Ticket</a></li>
                <li><a href="profile.html">My Profile</a></li>
            </ul>
        </nav>
       <div id="auth-section">
            <a href="/auth/steam" class="steam-login">
                <img src="assets/steam.png" alt="Steam">
                Sign in with Steam
            </a>
        </div>
    </header>
    
    <div class="container">

        <!-- DEV TEST PANEL: Quick Debugging -->
        <div class="test-panel">
            <h3>üõ†Ô∏è DEVELOPER TEST ACTIONS</h3>
            <p>Click to instantly add items to your account for testing.</p>
            
            <button onclick="buyGems()" class="test-btn btn-gem">üíé +500 Gems</button>
<button onclick="buyPoints()" class="test-btn" style="background-color: #2ecc71;">ü™ô +500 Shop Points</button>
<div style="display: inline-block; width: 20px;"></div> <!-- Spacer -->
            <button onclick="buyRank('vip')" class="test-btn btn-rank">Unlock VIP</button>
            <button onclick="buyRank('elite')" class="test-btn btn-rank">Unlock Elite</button>
            <button onclick="buyRank('soldier')" class="test-btn btn-rank">Unlock Soldier</button>
            <button onclick="buyRank('juggernaut')" class="test-btn btn-rank">Unlock Juggernaut</button>
            <button onclick="buyRank('overlord')" class="test-btn btn-rank">Unlock Overlord</button>
        </div>

        <h2 style="text-align: center; border: none;">Store Packages</h2>
        <p style="text-align: center; color: #aaa; margin-bottom: 40px;">Select a rank to dominate the server.</p>
        
        <div class="store-grid">
            
            <!-- 1. VIP -->
            <div class="card">
                <h3 style="color: #aaa;">VIP</h3>
                <p>Entry level perks.<br><br>‚Ä¢ Skip Queue<br>‚Ä¢ Skinbox Access<br>‚Ä¢ 2x Kits</p>
                <h4>\$10.00 <span style="font-size: 14px; color: #666;">/ mo</span></h4>
                <button onclick="buyRank('vip')" class="btn btn-primary" style="background: transparent; border: 1px solid var(--primary-orange); color: var(--primary-orange); width: 100%;">Buy VIP</button>
            </div>

            <!-- 2. ELITE -->
            <div class="card">
                <h3 style="color: #3498db;">ELITE</h3>
                <p>Advanced kit access.<br><br>‚Ä¢ <b>All VIP Perks</b><br>‚Ä¢ Furnace Splitter<br>‚Ä¢ Better Loadout</p>
                <h4>\$20.00 <span style="font-size: 14px; color: #666;">/ mo</span></h4>
                <button onclick="buyRank('elite')" class="btn btn-primary" style="background: transparent; border: 1px solid var(--primary-orange); color: var(--primary-orange); width: 100%;">Buy Elite</button>
            </div>

            <!-- 3. SOLDIER (Featured) -->
            <div class="card featured">
                <div style="position: absolute; top: -12px; left: 50%; transform: translateX(-50%); background: var(--primary-orange); color: black; padding: 2px 10px; font-size: 10px; font-weight: bold; border-radius: 4px; text-transform: uppercase;">Popular</div>
                <h3 style="color: var(--primary-orange);">SOLDIER</h3>
                <p>Combat ready.<br><br>‚Ä¢ <b>All Elite Perks</b><br>‚Ä¢ LR-300 Kit<br>‚Ä¢ 3x Resources</p>
                <h4>\$30.00 <span style="font-size: 14px; color: #666;">/ mo</span></h4>
                <button onclick="buyRank('soldier')" class="btn btn-primary" style="width: 100%;">Buy Soldier</button>
            </div>

            <!-- 4. JUGGERNAUT -->
            <div class="card">
                <h3 style="color: #e74c3c;">JUGGERNAUT</h3>
                <p>Heavy dominance.<br><br>‚Ä¢ <b>All Soldier Perks</b><br>‚Ä¢ M249 Access<br>‚Ä¢ Raid Alert</p>
                <h4>\$50.00 <span style="font-size: 14px; color: #666;">/ mo</span></h4>
                <button onclick="buyRank('juggernaut')" class="btn btn-primary" style="background: transparent; border: 1px solid var(--primary-orange); color: var(--primary-orange); width: 100%;">Buy Juggernaut</button>
            </div>

            <!-- 5. OVERLORD -->
            <div class="card">
                <h3 style="color: #9b59b6;">OVERLORD</h3>
                <p>The ultimate tier.<br><br>‚Ä¢ <b>Everything</b><br>‚Ä¢ Custom Chat Tag<br>‚Ä¢ Priority Support</p>
                <h4>\$100.00 <span style="font-size: 14px; color: #666;">/ lifetime</span></h4>
                <button onclick="buyRank('overlord')" class="btn btn-primary" style="background: transparent; border: 1px solid var(--primary-orange); color: var(--primary-orange); width: 100%;">Buy Overlord</button>
            </div>

        </div>
    </div>

    <footer>
        <div class="footer-content">
            <div class="footer-left">
                <p>&copy; 2026 Classic Rust. All rights reserved.</p>
                <p class="credits">Designed by <a href="https://aetheriwebdesign.com/" target="_blank">Aetheri Web Design</a></p>
            </div>
            <div class="footer-right">
                <a href="#">Terms of Service</a>
                <a href="#">Privacy Policy</a>
                <a href="https://discord.gg/QdQUvPvg" class="btn btn-discord-small">
                    <img src="assets/discord.png" alt="Discord" style="width: 20px; height: 20px;">
                    Join Discord
                </a>
            </div>
        </div>
    </footer>

    <script src="auth.js"></script>
    <script src="loader.js"></script>
    <script src="mobile.js"></script>
    
    <script>
        const API_BASE = ''; 

        // 1. Buy Gems
        async function buyGems() {
            try {
                const res = await fetch(`${API_BASE}/api/store/buy-gems`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    credentials: 'include' 
                });

                const data = await res.json();
                if (res.ok) {
                    alert(data.message);
                } else {
                    alert(data.error || "Login Required!");
                }
            } catch (e) {
                alert("Error connecting to server.");
            }
        }

        // 2. Buy Rank (Accepts dynamic rank name)
        async function buyRank(rankName) {
            try {
                const res = await fetch(`${API_BASE}/api/store/buy-rank`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    credentials: 'include', 
                    body: JSON.stringify({ rank: rankName })
                });

                const data = await res.json();
                if (res.ok) {
                    alert(data.message + `\n\nGo in-game and type /kit to redeem your ${rankName.toUpperCase()} kit!`);
                } else {
                    alert(data.error || "Login Required!");
                }
            } catch (e) {
                alert("Error connecting to server.");
            }
        }


        // 3. Buy Shop Points
async function buyPoints() {
    try {
        const res = await fetch(`${API_BASE}/api/store/buy-points`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            credentials: 'include' 
        });

        const data = await res.json();
        if (res.ok) {
            alert(data.message);
        } else {
            alert(data.error || "Login Required!");
        }
    } catch (e) {
        alert("Error connecting to server.");
    }
}
    </script>
</body>
</html>